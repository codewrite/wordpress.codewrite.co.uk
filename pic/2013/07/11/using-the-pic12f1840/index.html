<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
<!--<![endif]-->
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Using the PIC12F1840 | PIC Tutorials</title>
<link rel="profile" href="../../../../../xfn/11.html" />
<link rel="stylesheet" type="text/css" media="all" href="../../../../wp-content/themes/twentyeleven/style.css" />
<link rel="alternate" type="application/rss+xml" title="PIC Tutorials &raquo; Feed" href="../../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="PIC Tutorials &raquo; Comments Feed" href="../../../../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="PIC Tutorials &raquo; Using the PIC12F1840 Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='collapseomatic-css-css'  href='../../../../wp-content/plugins/jquery-collapse-o-matic/light_style00e2.css?ver=1.5.7' type='text/css' media='all' />
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jqueryc1d8.js?ver=1.11.3'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jquery-migrate.min1576.js?ver=1.2.1'></script>
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Setting up the PICkit3 with MPLABX (Part 2)' href='../setting-up-the-pickit3-with-mplabx-part-2/index.html' />
<link rel='next' title='PIC12F1840: Blink using timer0 and interrupts' href='../../12/pic12f1840-blink-using-timer0-and-interrupts/index.html' />
<link rel='canonical' href='index.html' />
<link rel='shortlink' href='../../../../indexfbd5.html?p=42' />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="single single-post postid-42 single-format-standard single-author singular two-column right-sidebar">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title"><span><a href="../../../../index.html" rel="home">PIC Tutorials</a></span></h1>
				<h2 id="site-description">Electronics and Programming Simplified</h2>
			</hgroup>

						<a href="../../../../index.html">
									<img src="../../../../wp-content/uploads/sites/2/2013/07/cropped-header1.png" width="1000" height="288" alt="" />
							</a>
			
			
			<nav id="access" role="navigation">
				<h3 class="assistive-text">Main menu</h3>
								<div class="skip-link"><a class="assistive-text" href="#content">Skip to primary content</a></div>
												<div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-349" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-349"><a href="../../../../../ham/index.html">Amateur Radio</a></li>
<li id="menu-item-351" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-351"><a href="../../../../about/index.html">About</a></li>
</ul></div>			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">

		<div id="primary">
			<div id="content" role="main">

				
					<nav id="nav-single">
						<h3 class="assistive-text">Post navigation</h3>
						<span class="nav-previous"><a href="../setting-up-the-pickit3-with-mplabx-part-2/index.html" rel="prev"><span class="meta-nav">&larr;</span> Previous</a></span>
						<span class="nav-next"><a href="../../12/pic12f1840-blink-using-timer0-and-interrupts/index.html" rel="next">Next <span class="meta-nav">&rarr;</span></a></span>
					</nav><!-- #nav-single -->

					
<article id="post-42" class="post-42 post type-post status-publish format-standard hentry category-usingmplabx">
	<header class="entry-header">
		<h1 class="entry-title">Using the PIC12F1840</h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="index.html" title="9:36 pm" rel="bookmark"><time class="entry-date" datetime="2013-07-11T21:36:11+00:00">July 11, 2013</time></a><span class="by-author">by </span> <span class="author vcard"><a class="url fn n" href="../../../../author/jon/index.html" title="View all posts by jon" rel="author">jon</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>The PIC32 chip worked well, but this time I&#8217;m going to use a much cheaper (and smaller) device. The PIC12F1840 comes in an 8 pin DIP package. I&#8217;m going to do the same code &#8211; flash an LED &#8211; the principle is same as for the PIC32 chip, so we&#8217;ll use a similar circuit to program it:</p>
<p><a href="../../../../wp-content/uploads/sites/2/2013/07/102_0104.jpg"><img class="alignnone size-medium wp-image-43" alt="102_0104" src="../../../../wp-content/uploads/sites/2/2013/07/102_0104-300x168.jpg" width="300" height="168" /></a></p>
<p>This time though, we&#8217;re going to use an external supply rather than powering it from the PICkit3. Hence the battery pack. That&#8217;s 4 Ni-Mh cells, and produces just over 5V. We could power the PIC directly, but the batteries could theoretically provide over 5.5V when fully charged, so I&#8217;m going to use voltage regulator to bring the voltage down to 3.3V. Here is the schematic:</p>
<p><a href="../../../../wp-content/uploads/sites/2/2013/07/PIC12F1840Pgm.png"><img class="alignnone size-medium wp-image-48" alt="PIC12F1840Pgm" src="../../../../wp-content/uploads/sites/2/2013/07/PIC12F1840Pgm-300x158.png" width="300" height="158" /></a></p>
<p>After I built this, I measured the input voltage:</p>
<p><a style="font-style: normal; line-height: 24px; text-decoration: underline;" href="../../../../wp-content/uploads/sites/2/2013/07/Blink2_Vin.jpg"><img class="alignnone size-medium wp-image-45" style="border-color: #bbbbbb; background-color: #eeeeee;" alt="Blink2_Vin" src="../../../../wp-content/uploads/sites/2/2013/07/Blink2_Vin-300x132.jpg" width="300" height="132" /></a></p>
<p>and output voltage:</p>
<p><a href="../../../../wp-content/uploads/sites/2/2013/07/Blink2_Vout.jpg"><img class="alignnone size-medium wp-image-46" alt="Blink2_Vout" src="../../../../wp-content/uploads/sites/2/2013/07/Blink2_Vout-300x136.jpg" width="300" height="136" /></a></p>
<p>The regulator is supposed to output 3.3V, so that&#8217;s spot on.<em></em></p>
<p>We&#8217;re going to need a different compiler, so I have downloaded and installed the XC8 compiler.The program is essentially the same as Blink1 for the PIC32 chip, but is coded slightly differently:</p>
<pre>int main(int argc, char** argv)
{
  TRISA = 0xEF; // Set RA4 pin as output

  // Loop to flash an LED on RA4 (pin 3)
  while(1)
  {
    RA4 = 1; // Set RA4 high
    // Insert some delay
    int i = 10000;
    while(i--);

    RA4 = 0; // Set RA4 low
    // Insert some delay
    i = 10000;
    while(i--);
  }

  return (EXIT_SUCCESS);
}</pre>
<p>We need to add the following include statement at the top of the file:</p>
<pre>#include &lt;xc.h&gt;</pre>
<p>This will choose the correct include file (in this case pic12f1840.h).</p>
<p>You&#8217;ll notice that the delay loop (which I&#8217;m still not proud of) has less iterations than the PIC32 chip. This chip is considerably slower! By default the device is running at 500KHz. We can increase this to 32MHz, but the power consumption will be much higher.</p>
<p>One advantage of powering the device externally is that we can disconnect the programmer and the code will still run. In order to do this we need to select Run Project (Blink2) from the run menu. The code, which is stored flash memory even when the power is off, will then happily just start running as soon as the battery is connected.</p>
<p>With the PIC running just off the battery, I thought I&#8217;d check the current consumption. The current fluctuates between 0.16mA and 3.34mA depending on whether the LED is off or on. Given that the voltage drop across Â the LED should be about 1.8V, 3mA is what I would expect to be going through the LED. As you can see though, it doesn&#8217;t draw much current when it is running. With proper use of sleep modes it is possible to get this device to use much less current when operating.</p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
		This entry was posted in <a href="../../../../category/usingmplabx/index.html" rel="category tag">Getting Started With MPLABX</a> by <a href="../../../../author/jon/index.html">jon</a>. Bookmark the <a href="index.html" title="Permalink to Using the PIC12F1840" rel="bookmark">permalink</a>.		
			</footer><!-- .entry-meta -->
</article><!-- #post-42 -->

						<div id="comments">
	
	
	

			
</div><!-- #comments -->

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript'>
var colomatduration = 'fast';
var colomatslideEffect = 'slideFade';
</script><script type='text/javascript' src='../../../../wp-includes/js/comment-reply.min5b31.js?ver=4.3.1'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/jquery-collapse-o-matic/js/collapse00e2.js?ver=1.5.7'></script>

</body>
</html>